<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Yashmiq AI ‚Äî Internet Search</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:ital,wght@0,300;0,400;1,300&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #04060f;
    --surface: #080d1a;
    --card: #0c1220;
    --border: #151f35;
    --border2: #1e2d4a;
    --accent: #00c6ff;
    --accent2: #0072ff;
    --accent3: #7b61ff;
    --glow: rgba(0, 198, 255, 0.2);
    --glow2: rgba(0, 114, 255, 0.15);
    --text: #ddeeff;
    --text2: #8899bb;
    --text3: #556688;
    --success: #00e5a0;
  }

  html, body { height: 100%; overflow: hidden; }

  body {
    font-family: 'Outfit', sans-serif;
    background: var(--bg);
    color: var(--text);
    display: flex;
    flex-direction: column;
    position: relative;
  }

  .bg-grid {
    position: fixed; inset: 0;
    background-image:
      linear-gradient(rgba(0,198,255,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,198,255,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none; z-index: 0;
    animation: grid-drift 20s linear infinite;
  }

  @keyframes grid-drift {
    from { background-position: 0 0; }
    to { background-position: 40px 40px; }
  }

  .bg-glow-1 {
    position: fixed; width: 600px; height: 400px;
    top: -100px; left: -150px;
    background: radial-gradient(ellipse, rgba(0,114,255,0.12), transparent 70%);
    pointer-events: none; z-index: 0;
  }

  .bg-glow-2 {
    position: fixed; width: 500px; height: 350px;
    bottom: 0; right: -100px;
    background: radial-gradient(ellipse, rgba(123,97,255,0.1), transparent 70%);
    pointer-events: none; z-index: 0;
  }

  header {
    position: relative; z-index: 20;
    padding: 14px 20px;
    border-bottom: 1px solid var(--border);
    background: rgba(4,6,15,0.85);
    backdrop-filter: blur(20px);
    display: flex; align-items: center; gap: 12px;
  }

  .logo-wrap { position: relative; width: 40px; height: 40px; flex-shrink: 0; }

  .logo-ring {
    position: absolute; inset: 0;
    border-radius: 50%;
    border: 2px solid var(--accent);
    border-top-color: transparent;
    animation: spin 2s linear infinite;
  }

  @keyframes spin { to { transform: rotate(360deg); } }

  .logo-inner {
    position: absolute; inset: 5px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent2), var(--accent3));
    display: flex; align-items: center; justify-content: center;
    font-size: 16px;
    box-shadow: 0 0 15px var(--glow);
  }

  .header-text h1 {
    font-size: 16px; font-weight: 800;
    letter-spacing: 0.08em; text-transform: uppercase;
    background: linear-gradient(90deg, var(--accent), var(--accent2), var(--accent3));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  }

  .header-text p { font-size: 10px; color: var(--text3); font-family: 'JetBrains Mono', monospace; margin-top: 1px; }

  .internet-badge {
    margin-left: auto;
    display: flex; align-items: center; gap: 5px;
    padding: 4px 10px; border-radius: 100px;
    border: 1px solid rgba(0,229,160,0.25);
    background: rgba(0,229,160,0.05);
    font-size: 10px; font-family: 'JetBrains Mono', monospace;
    color: var(--success);
  }

  .pulse {
    width: 6px; height: 6px; border-radius: 50%;
    background: var(--success); box-shadow: 0 0 8px rgba(0,229,160,0.7);
    animation: blink 1.5s ease-in-out infinite;
  }

  @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }

  #chat-area {
    position: relative; z-index: 10;
    flex: 1; overflow-y: auto;
    padding: 20px 16px;
    display: flex; flex-direction: column; gap: 18px;
    scroll-behavior: smooth;
  }

  #chat-area::-webkit-scrollbar { width: 3px; }
  #chat-area::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 3px; }

  #welcome {
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    flex: 1; min-height: 60vh;
    text-align: center; gap: 14px;
    animation: fadeUp 0.6s ease forwards;
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .globe-icon-big {
    font-size: 56px;
    filter: drop-shadow(0 0 20px rgba(0,198,255,0.5));
    animation: float 3s ease-in-out infinite;
  }

  @keyframes float {
    0%,100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
  }

  #welcome h2 {
    font-size: 24px; font-weight: 800;
    background: linear-gradient(135deg, #fff, var(--accent), var(--accent3));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  }

  #welcome .sub { color: var(--text2); font-size: 13px; max-width: 300px; line-height: 1.6; }

  .pills { display: flex; flex-wrap: wrap; gap: 6px; justify-content: center; margin: 4px 0; }

  .pill {
    padding: 4px 12px; border-radius: 100px;
    border: 1px solid var(--border2);
    font-size: 11px; color: var(--text2); background: var(--card);
    display: flex; align-items: center; gap: 5px;
  }

  .chips { display: flex; flex-wrap: wrap; gap: 7px; justify-content: center; margin-top: 8px; }

  .chip {
    padding: 8px 14px; border-radius: 10px;
    border: 1px solid var(--border2);
    font-size: 12px; color: var(--text2);
    cursor: pointer; background: var(--card);
    transition: all 0.2s; font-family: 'Outfit', sans-serif;
  }

  .chip:hover { border-color: var(--accent); color: var(--accent); background: rgba(0,198,255,0.07); transform: translateY(-1px); }

  .msg { display: flex; gap: 10px; max-width: 820px; width: 100%; animation: fadeUp 0.25s ease forwards; opacity: 0; }
  .msg.user { align-self: flex-end; flex-direction: row-reverse; }
  .msg.ai { align-self: flex-start; }

  .av { width: 30px; height: 30px; border-radius: 50%; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 14px; margin-top: 2px; }
  .av.ai-av { background: linear-gradient(135deg, var(--accent2), var(--accent3)); box-shadow: 0 0 12px var(--glow); }
  .av.user-av { background: var(--card); border: 1px solid var(--border2); color: var(--accent); font-weight: 700; font-size: 12px; }

  .bwrap { display: flex; flex-direction: column; gap: 6px; max-width: calc(100% - 44px); }

  .bubble { padding: 11px 15px; border-radius: 14px; font-size: 13.5px; line-height: 1.75; }
  .msg.ai .bubble { background: var(--card); border: 1px solid var(--border); border-top-left-radius: 4px; }
  .msg.user .bubble { background: linear-gradient(135deg, rgba(0,114,255,0.2), rgba(123,97,255,0.15)); border: 1px solid rgba(0,198,255,0.2); border-top-right-radius: 4px; }

  .search-indicator {
    display: flex; align-items: center; gap: 8px;
    padding: 9px 13px; border-radius: 10px;
    background: rgba(0,198,255,0.05);
    border: 1px solid rgba(0,198,255,0.15);
    font-size: 11.5px; font-family: 'JetBrains Mono', monospace;
    color: var(--accent);
  }

  .sdots { display: flex; gap: 3px; }
  .sdot { width: 4px; height: 4px; border-radius: 50%; background: var(--accent); animation: bounce 1s ease-in-out infinite; }
  .sdot:nth-child(2) { animation-delay: 0.15s; background: var(--accent2); }
  .sdot:nth-child(3) { animation-delay: 0.3s; background: var(--accent3); }

  @keyframes bounce { 0%,60%,100%{transform:translateY(0)} 30%{transform:translateY(-5px)} }

  .sources { display: flex; flex-wrap: wrap; gap: 5px; margin-top: 4px; }
  .src { padding: 3px 8px; border-radius: 6px; background: rgba(0,198,255,0.06); border: 1px solid rgba(0,198,255,0.12); font-size: 10px; font-family: 'JetBrains Mono', monospace; color: var(--text3); }

  .bubble strong { color: #fff; font-weight: 600; }
  .bubble em { color: var(--accent); font-style: italic; }
  .bubble code { background: rgba(0,198,255,0.1); padding: 1px 5px; border-radius: 4px; font-family: 'JetBrains Mono', monospace; font-size: 12px; color: var(--accent); }
  .bubble pre { background: #04060f; border: 1px solid var(--border2); border-radius: 8px; padding: 12px; margin: 8px 0; overflow-x: auto; font-family: 'JetBrains Mono', monospace; font-size: 12px; line-height: 1.6; color: #a8c7f0; }
  .bubble pre code { background: none; padding: 0; color: #a8c7f0; }
  .bubble ul, .bubble ol { padding-left: 18px; margin: 6px 0; }
  .bubble li { margin: 3px 0; }
  .bubble h3 { font-size: 14px; margin: 8px 0 4px; color: #fff; }
  .bubble a { color: var(--accent); text-decoration: none; }
  .bubble a:hover { text-decoration: underline; }

  .typing { display: flex; align-items: center; gap: 4px; padding: 12px 15px; }
  .td { width: 6px; height: 6px; border-radius: 50%; animation: bounce 1.1s ease-in-out infinite; }
  .td:nth-child(1) { background: var(--accent); }
  .td:nth-child(2) { background: var(--accent2); animation-delay: 0.18s; }
  .td:nth-child(3) { background: var(--accent3); animation-delay: 0.36s; }

  .input-zone {
    position: relative; z-index: 20;
    padding: 12px 16px 16px;
    border-top: 1px solid var(--border);
    background: rgba(4,6,15,0.9);
    backdrop-filter: blur(20px);
  }

  .input-row {
    display: flex; align-items: flex-end; gap: 8px;
    background: var(--card); border: 1px solid var(--border2);
    border-radius: 14px; padding: 10px 12px;
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .input-row:focus-within { border-color: rgba(0,198,255,0.4); box-shadow: 0 0 20px rgba(0,198,255,0.08); }

  textarea {
    flex: 1; border: none; outline: none;
    background: transparent; color: var(--text);
    font-family: 'Outfit', sans-serif; font-size: 13.5px;
    resize: none; max-height: 120px; min-height: 22px; line-height: 1.6;
  }

  textarea::placeholder { color: var(--text3); }

  .send-btn {
    width: 36px; height: 36px; border-radius: 10px;
    background: linear-gradient(135deg, var(--accent2), var(--accent3));
    border: none; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0; transition: all 0.2s;
    box-shadow: 0 0 15px var(--glow2);
  }

  .send-btn:hover { transform: scale(1.06); box-shadow: 0 0 25px var(--glow2); }
  .send-btn:active { transform: scale(0.96); }
  .send-btn:disabled { opacity: 0.35; cursor: not-allowed; transform: none; }
  .send-btn svg { width: 15px; height: 15px; fill: white; }

  .input-hint { display: flex; align-items: center; justify-content: center; gap: 6px; margin-top: 7px; font-size: 10px; color: var(--text3); font-family: 'JetBrains Mono', monospace; }

  .error-bubble { background: rgba(255,60,60,0.07) !important; border-color: rgba(255,60,60,0.2) !important; color: #ff9999 !important; }

  @media (max-width: 480px) {
    header { padding: 12px 14px; }
    #chat-area { padding: 16px 12px; }
    .input-zone { padding: 10px 12px 14px; }
    #welcome h2 { font-size: 20px; }
  }
</style>
</head>
<body>

<div class="bg-grid"></div>
<div class="bg-glow-1"></div>
<div class="bg-glow-2"></div>

<header>
  <div class="logo-wrap">
    <div class="logo-ring"></div>
    <div class="logo-inner">üåê</div>
  </div>
  <div class="header-text">
    <h1>Yashmiq AI</h1>
    <p>carian internet masa nyata ¬∑ claude ai</p>
  </div>
  <div class="internet-badge">
    <div class="pulse"></div>
    Internet ON
  </div>
</header>

<div id="chat-area">
  <div id="welcome">
    <div class="globe-icon-big">üåê</div>
    <h2>Yashmiq AI</h2>
    <p class="sub">Tanya apa sahaja ‚Äî saya akan cari di seluruh internet dan berikan jawapan terkini untuk anda.</p>
    <div class="pills">
      <div class="pill">üîç Real-time Search</div>
      <div class="pill">‚ö° Terkini</div>
      <div class="pill">üåè Seluruh Internet</div>
    </div>
    <div class="chips">
      <div class="chip" onclick="useChip(this)">Berita terkini Malaysia</div>
      <div class="chip" onclick="useChip(this)">Harga Bitcoin hari ini</div>
      <div class="chip" onclick="useChip(this)">Cuaca Kuala Lumpur</div>
      <div class="chip" onclick="useChip(this)">Keputusan EPL tadi malam</div>
    </div>
  </div>
</div>

<div class="input-zone">
  <div class="input-row">
    <textarea id="msg-input" placeholder="Tanya apa sahaja, Yashmiq cari di internet..." rows="1"></textarea>
    <button class="send-btn" id="send-btn" onclick="send()">
      <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
    </button>
  </div>
  <div class="input-hint">
    <span>üåê</span>
    <span>Yashmiq mencari internet secara automatik ¬∑ Enter untuk hantar</span>
  </div>
</div>

<script>
const chatArea = document.getElementById('chat-area');
const welcome = document.getElementById('welcome');
const inputEl = document.getElementById('msg-input');
const sendBtn = document.getElementById('send-btn');
const history = [];

inputEl.addEventListener('input', () => {
  inputEl.style.height = 'auto';
  inputEl.style.height = Math.min(inputEl.scrollHeight, 120) + 'px';
});

inputEl.addEventListener('keydown', e => {
  if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); send(); }
});

function useChip(el) { inputEl.value = el.textContent; send(); }

function hideWelcome() { if (welcome) welcome.style.display = 'none'; }
function scrollBottom() { chatArea.scrollTop = chatArea.scrollHeight; }

function escHtml(s) {
  return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

function fmtMsg(text) {
  text = text.replace(/```(\w*)\n?([\s\S]*?)```/g, '<pre><code>$2</code></pre>');
  text = text.replace(/`([^`]+)`/g, '<code>$1</code>');
  text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
  text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
  text = text.replace(/^### (.+)$/gm, '<h3>$1</h3>');
  text = text.replace(/\[([^\]]+)\]\((https?:\/\/[^\)]+)\)/g, '<a href="$2" target="_blank" rel="noopener">$1</a>');
  text = text.replace(/^[-‚Ä¢] (.+)$/gm, '<li>$1</li>');
  text = text.replace(/(<li>.*?<\/li>\n?)+/gs, m => `<ul>${m}</ul>`);
  text = text.replace(/\n/g, '<br>');
  return text;
}

function addUserMsg(txt) {
  hideWelcome();
  const d = document.createElement('div');
  d.className = 'msg user';
  d.innerHTML = `<div class="av user-av">Y</div><div class="bwrap"><div class="bubble">${escHtml(txt)}</div></div>`;
  chatArea.appendChild(d);
  scrollBottom();
}

function showSearching() {
  hideWelcome();
  const d = document.createElement('div');
  d.className = 'msg ai'; d.id = 'search-el';
  d.innerHTML = `<div class="av ai-av">üåê</div><div class="bwrap"><div class="search-indicator"><div class="sdots"><div class="sdot"></div><div class="sdot"></div><div class="sdot"></div></div>Mencari di internet...</div></div>`;
  chatArea.appendChild(d); scrollBottom();
  return d;
}

function showTyping() {
  hideWelcome();
  const d = document.createElement('div');
  d.className = 'msg ai'; d.id = 'typing-el';
  d.innerHTML = `<div class="av ai-av">üåê</div><div class="bwrap"><div class="bubble"><div class="typing"><div class="td"></div><div class="td"></div><div class="td"></div></div></div></div>`;
  chatArea.appendChild(d); scrollBottom();
  return d;
}

function addAIMsg(txt, sources=[]) {
  const d = document.createElement('div');
  d.className = 'msg ai';
  const srcHtml = sources.length ? `<div class="sources">${sources.map(s=>`<div class="src">üîó ${escHtml(s)}</div>`).join('')}</div>` : '';
  d.innerHTML = `<div class="av ai-av">üåê</div><div class="bwrap"><div class="bubble">${fmtMsg(txt)}</div>${srcHtml}</div>`;
  chatArea.appendChild(d); scrollBottom();
}

function addErrMsg(txt) {
  const d = document.createElement('div');
  d.className = 'msg ai';
  d.innerHTML = `<div class="av ai-av">üåê</div><div class="bwrap"><div class="bubble error-bubble">‚ö†Ô∏è ${escHtml(txt)}</div></div>`;
  chatArea.appendChild(d); scrollBottom();
}

async function send() {
  const msg = inputEl.value.trim();
  if (!msg || sendBtn.disabled) return;

  addUserMsg(msg);
  history.push({ role: 'user', content: msg });

  inputEl.value = '';
  inputEl.style.height = 'auto';
  sendBtn.disabled = true;

  const searchEl = showSearching();

  try {
    // Gunakan Anthropic API dengan web_search tool
    const res = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'anthropic-version': '2023-06-01',
        'anthropic-dangerous-direct-browser-access': 'true'
      },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 2048,
        system: `Kamu adalah Yashmiq, asisten AI cerdas yang sentiasa mencari maklumat terbaru dari internet.
Berbahasa Melayu dengan mesra, informatif dan tepat.
WAJIB gunakan web_search untuk setiap soalan ‚Äî utamakan maklumat terkini.
Selepas cari, berikan jawapan lengkap, teratur dan rujuk sumber jika ada.`,
        messages: history,
        tools: [{ type: 'web_search_20250305', name: 'web_search' }]
      })
    });

    const data = await res.json();
    searchEl.remove();

    if (data.error) {
      addErrMsg(`Ralat API: ${data.error.message}`);
    } else {
      let reply = '';
      if (data.content) {
        for (const block of data.content) {
          if (block.type === 'text') reply += block.text;
        }
      }
      if (!reply) reply = 'Maaf, tiada respons diterima. Sila cuba lagi.';
      history.push({ role: 'assistant', content: reply });
      addAIMsg(reply);
    }

  } catch (err) {
    searchEl.remove();
    addErrMsg(`Gagal sambung: ${err.message}. Pastikan sambungan internet anda aktif.`);
  }

  sendBtn.disabled = false;
  inputEl.focus();
}
</script>
</body>
</html>
